function cov_x3k8epmt4(){var path="C:\\Users\\mertt\\perfanalytic\\perfanalytics\\backend\\dbconnection.js";var hash="b0a935938d843b9b6a5a68162a6b8243447532e1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\mertt\\perfanalytic\\perfanalytics\\backend\\dbconnection.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:0},end:{line:2,column:27}},"2":{start:{line:3,column:12},end:{line:3,column:33}},"3":{start:{line:6,column:2},end:{line:45,column:5}},"4":{start:{line:7,column:4},end:{line:44,column:5}},"5":{start:{line:8,column:6},end:{line:8,column:30}},"6":{start:{line:9,column:24},end:{line:9,column:54}},"7":{start:{line:10,column:24},end:{line:10,column:47}},"8":{start:{line:11,column:6},end:{line:27,column:9}},"9":{start:{line:12,column:8},end:{line:26,column:13}},"10":{start:{line:19,column:12},end:{line:25,column:13}},"11":{start:{line:20,column:14},end:{line:20,column:50}},"12":{start:{line:21,column:14},end:{line:21,column:33}},"13":{start:{line:23,column:14},end:{line:23,column:55}},"14":{start:{line:24,column:14},end:{line:24,column:24}},"15":{start:{line:29,column:6},end:{line:43,column:11}},"16":{start:{line:36,column:10},end:{line:42,column:11}},"17":{start:{line:37,column:12},end:{line:37,column:48}},"18":{start:{line:38,column:12},end:{line:38,column:31}},"19":{start:{line:40,column:12},end:{line:40,column:53}},"20":{start:{line:41,column:12},end:{line:41,column:22}},"21":{start:{line:49,column:2},end:{line:49,column:31}},"22":{start:{line:52,column:0},end:{line:52,column:36}}},fnMap:{"0":{name:"connect",decl:{start:{line:5,column:9},end:{line:5,column:16}},loc:{start:{line:5,column:19},end:{line:46,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:6,column:21},end:{line:6,column:22}},loc:{start:{line:6,column:42},end:{line:45,column:3}},line:6},"2":{name:"(anonymous_2)",decl:{start:{line:11,column:38},end:{line:11,column:39}},loc:{start:{line:11,column:44},end:{line:27,column:7}},line:11},"3":{name:"(anonymous_3)",decl:{start:{line:18,column:16},end:{line:18,column:17}},loc:{start:{line:18,column:30},end:{line:26,column:11}},line:18},"4":{name:"(anonymous_4)",decl:{start:{line:35,column:14},end:{line:35,column:15}},loc:{start:{line:35,column:28},end:{line:43,column:9}},line:35},"5":{name:"close",decl:{start:{line:48,column:9},end:{line:48,column:14}},loc:{start:{line:48,column:17},end:{line:50,column:1}},line:48}},branchMap:{"0":{loc:{start:{line:7,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:44,column:5}},{start:{line:7,column:4},end:{line:44,column:5}}],line:7},"1":{loc:{start:{line:19,column:12},end:{line:25,column:13}},type:"if",locations:[{start:{line:19,column:12},end:{line:25,column:13}},{start:{line:19,column:12},end:{line:25,column:13}}],line:19},"2":{loc:{start:{line:36,column:10},end:{line:42,column:11}},type:"if",locations:[{start:{line:36,column:10},end:{line:42,column:11}},{start:{line:36,column:10},end:{line:42,column:11}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b0a935938d843b9b6a5a68162a6b8243447532e1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_x3k8epmt4=function(){return actualCoverage;};}return actualCoverage;}cov_x3k8epmt4();const mongoose=(cov_x3k8epmt4().s[0]++,require("mongoose"));cov_x3k8epmt4().s[1]++;require("dotenv").config();//config objesi alıp içinde path alabiliyor
const uri=(cov_x3k8epmt4().s[2]++,process.env.ATLAS_URI);function connect(){cov_x3k8epmt4().f[0]++;cov_x3k8epmt4().s[3]++;return new Promise((resolve,reject)=>{cov_x3k8epmt4().f[1]++;cov_x3k8epmt4().s[4]++;if(process.env.ENV==="test"){cov_x3k8epmt4().b[0][0]++;cov_x3k8epmt4().s[5]++;console.log("test env");const Mockgoose=(cov_x3k8epmt4().s[6]++,require("mockgoose").Mockgoose);const mockgoose=(cov_x3k8epmt4().s[7]++,new Mockgoose(mongoose));cov_x3k8epmt4().s[8]++;mockgoose.prepareStorage().then(()=>{cov_x3k8epmt4().f[2]++;cov_x3k8epmt4().s[9]++;mongoose.connect.connect(uri,{useNewUrlParser:true,useCreateIndex:true,useUnifiedTopology:true}).then((res,err)=>{cov_x3k8epmt4().f[3]++;cov_x3k8epmt4().s[10]++;if(err){cov_x3k8epmt4().b[1][0]++;cov_x3k8epmt4().s[11]++;console.log("db connection failed");cov_x3k8epmt4().s[12]++;return reject(err);}else{cov_x3k8epmt4().b[1][1]++;cov_x3k8epmt4().s[13]++;console.log("connected db successfully");cov_x3k8epmt4().s[14]++;resolve();}});});}else{cov_x3k8epmt4().b[0][1]++;cov_x3k8epmt4().s[15]++;mongoose.connect(uri,{useNewUrlParser:true,useCreateIndex:true,useUnifiedTopology:true}).then((res,err)=>{cov_x3k8epmt4().f[4]++;cov_x3k8epmt4().s[16]++;if(err){cov_x3k8epmt4().b[2][0]++;cov_x3k8epmt4().s[17]++;console.log("db connection failed");cov_x3k8epmt4().s[18]++;return reject(err);}else{cov_x3k8epmt4().b[2][1]++;cov_x3k8epmt4().s[19]++;console.log("connected db successfully");cov_x3k8epmt4().s[20]++;resolve();}});}});}function close(){cov_x3k8epmt4().f[5]++;cov_x3k8epmt4().s[21]++;return mongoose.disconnect();}cov_x3k8epmt4().s[22]++;module.exports={connect,close};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiY29ubmVjdGlvbi5qcyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25maWciLCJ1cmkiLCJwcm9jZXNzIiwiZW52IiwiQVRMQVNfVVJJIiwiY29ubmVjdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiRU5WIiwiY29uc29sZSIsImxvZyIsIk1vY2tnb29zZSIsIm1vY2tnb29zZSIsInByZXBhcmVTdG9yYWdlIiwidGhlbiIsInVzZU5ld1VybFBhcnNlciIsInVzZUNyZWF0ZUluZGV4IiwidXNlVW5pZmllZFRvcG9sb2d5IiwicmVzIiwiZXJyIiwiY2xvc2UiLCJkaXNjb25uZWN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjArR0FlWTt5RkFmWixLQUFNQSxDQUFBQSxRQUFRLHlCQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFWLENBQWQsQyx1QkFDQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsR0FBNEI7QUFDNUIsS0FBTUMsQ0FBQUEsR0FBRyx5QkFBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFNBQWYsQ0FBVCxDQUVBLFFBQVNDLENBQUFBLE9BQVQsRUFBbUIsK0NBQ2pCLE1BQU8sSUFBSUMsQ0FBQUEsT0FBSixDQUFZLENBQUNDLE9BQUQsQ0FBVUMsTUFBVixHQUFxQiwrQ0FDdEMsR0FBSU4sT0FBTyxDQUFDQyxHQUFSLENBQVlNLEdBQVosR0FBb0IsTUFBeEIsQ0FBZ0Msa0RBQzlCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFaLEVBQ0EsS0FBTUMsQ0FBQUEsU0FBUyx5QkFBR2IsT0FBTyxDQUFDLFdBQUQsQ0FBUCxDQUFxQmEsU0FBeEIsQ0FBZixDQUNBLEtBQU1DLENBQUFBLFNBQVMseUJBQUcsR0FBSUQsQ0FBQUEsU0FBSixDQUFjZCxRQUFkLENBQUgsQ0FBZixDQUg4Qix1QkFJOUJlLFNBQVMsQ0FBQ0MsY0FBVixHQUEyQkMsSUFBM0IsQ0FBZ0MsSUFBTSwrQ0FDcENqQixRQUFRLENBQUNPLE9BQVQsQ0FDR0EsT0FESCxDQUNXSixHQURYLENBQ2dCLENBQ1plLGVBQWUsQ0FBRSxJQURMLENBRVpDLGNBQWMsQ0FBRSxJQUZKLENBR1pDLGtCQUFrQixDQUFFLElBSFIsQ0FEaEIsRUFNR0gsSUFOSCxDQU1RLENBQUNJLEdBQUQsQ0FBTUMsR0FBTixHQUFjLGdEQUNsQixHQUFJQSxHQUFKLENBQVMsbURBQ1BWLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHNCQUFaLEVBRE8sd0JBRVAsTUFBT0gsQ0FBQUEsTUFBTSxDQUFDWSxHQUFELENBQWIsQ0FDRCxDQUhELElBR08sbURBQ0xWLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJCQUFaLEVBREssd0JBRUxKLE9BQU8sR0FDUixDQUNGLENBZEgsRUFlRCxDQWhCRCxFQWlCRCxDQXJCRCxJQXFCTyxtREFDTFQsUUFBUSxDQUNMTyxPQURILENBQ1dKLEdBRFgsQ0FDZ0IsQ0FDWmUsZUFBZSxDQUFFLElBREwsQ0FFWkMsY0FBYyxDQUFFLElBRkosQ0FHWkMsa0JBQWtCLENBQUUsSUFIUixDQURoQixFQU1HSCxJQU5ILENBTVEsQ0FBQ0ksR0FBRCxDQUFNQyxHQUFOLEdBQWMsZ0RBQ2xCLEdBQUlBLEdBQUosQ0FBUyxtREFDUFYsT0FBTyxDQUFDQyxHQUFSLENBQVksc0JBQVosRUFETyx3QkFFUCxNQUFPSCxDQUFBQSxNQUFNLENBQUNZLEdBQUQsQ0FBYixDQUNELENBSEQsSUFHTyxtREFDTFYsT0FBTyxDQUFDQyxHQUFSLENBQVksMkJBQVosRUFESyx3QkFFTEosT0FBTyxHQUNSLENBQ0YsQ0FkSCxFQWVELENBQ0YsQ0F2Q00sQ0FBUCxDQXdDRCxDQUVELFFBQVNjLENBQUFBLEtBQVQsRUFBaUIsZ0RBQ2YsTUFBT3ZCLENBQUFBLFFBQVEsQ0FBQ3dCLFVBQVQsRUFBUCxDQUNELEMsd0JBRURDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFFbkIsT0FBRixDQUFXZ0IsS0FBWCxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5yZXF1aXJlKFwiZG90ZW52XCIpLmNvbmZpZygpOyAvL2NvbmZpZyBvYmplc2kgYWzEsXAgacOnaW5kZSBwYXRoIGFsYWJpbGl5b3JcclxuY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuQVRMQVNfVVJJO1xyXG5cclxuZnVuY3Rpb24gY29ubmVjdCgpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgaWYgKHByb2Nlc3MuZW52LkVOViA9PT0gXCJ0ZXN0XCIpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJ0ZXN0IGVudlwiKTtcclxuICAgICAgY29uc3QgTW9ja2dvb3NlID0gcmVxdWlyZShcIm1vY2tnb29zZVwiKS5Nb2NrZ29vc2U7XHJcbiAgICAgIGNvbnN0IG1vY2tnb29zZSA9IG5ldyBNb2NrZ29vc2UobW9uZ29vc2UpO1xyXG4gICAgICBtb2NrZ29vc2UucHJlcGFyZVN0b3JhZ2UoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBtb25nb29zZS5jb25uZWN0XHJcbiAgICAgICAgICAuY29ubmVjdCh1cmksIHtcclxuICAgICAgICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxyXG4gICAgICAgICAgICB1c2VDcmVhdGVJbmRleDogdHJ1ZSxcclxuICAgICAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKChyZXMsIGVycikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJkYiBjb25uZWN0aW9uIGZhaWxlZFwiKTtcclxuICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb25uZWN0ZWQgZGIgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbW9uZ29vc2VcclxuICAgICAgICAuY29ubmVjdCh1cmksIHtcclxuICAgICAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcclxuICAgICAgICAgIHVzZUNyZWF0ZUluZGV4OiB0cnVlLFxyXG4gICAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcywgZXJyKSA9PiB7XHJcbiAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGIgY29ubmVjdGlvbiBmYWlsZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY29ubmVjdGVkIGRiIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZSgpIHtcclxuICByZXR1cm4gbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgY29ubmVjdCwgY2xvc2UgfTtcclxuIl19